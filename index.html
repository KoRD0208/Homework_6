<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="stylesheet" href="style.css">
   <title>Document</title>
</head>
<body>

   <div id="root">

   </div>

   <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
   <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/prop-types/15.8.1/prop-types.js"></script>
   <script src="https://unpkg.com/babel-standalone@6.26.0/babel.js"></script>   
   
<script type="text/babel">

class App extends React.Component {
   constructor(props) {
      super(props);
      this.state = {
         isLoaded: false,
         items: []
      }
   }

   async componentDidMount() {
      let response = await fetch("https://jsonplaceholder.typicode.com/users");
      const users = await response.json();
      this.setState({
         isLoaded: true,
         items: users
      });
   }

   render() {
      let {isLoaded, items} = this.state;

         if(!isLoaded) {
            return <div>Loading...</div>
         } else {
            return <div className="App">
               <UserList users={items}/>            
            </div>
         }
   }
}

class UserList extends React.Component {
   constructor(props) {
      super(props);
      this.state = {
         users: this.props.users
      }
   }

   static propTypes = {
      users: PropTypes.array.isRequired,
   }

   render() {
      let {users} = this.state;
      console.log(users)
         return (
            <div className="users">
               {
                  users.map(user => {
                  return <User userProps={user} key={user.id}/>
               })}
            </div>
         )
   }
}

class User extends React.Component {
   constructor(props) {
      super(props);
      this.state = {
         name: this.props.userProps.name,
         userName: this.props.userProps.username,
         email: this.props.userProps.email
      }
   }

   static propTypes = {
      userProps: PropTypes.object.isRequired,
   }

   render() {
      let {name, userName, email} = this.state;
      console.log(name, userName, email)
      return (
         <div className="user">
            <div className="user__name">
               {name}
            </div>
            <div className="user__username">
               <p>
                  Username:
               </p>
               {userName}
            </div>
            <div className="user__email">
               <p>
                  E-mail:
               </p>
               {email}
            </div>
         </div>
      )
   }
}




ReactDOM.render(
   <App/>,
   document.getElementById("root")
)

</script>
</body>
</html>